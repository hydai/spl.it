# CLAUDE.md — spl.it

## Project Overview

spl.it is a client-side domain name suggestion tool built with Next.js 16, React 19, TypeScript, and Tailwind CSS v4. It generates creative domain names from user input using 6 strategies, with domain hacks as the hero feature. The app is fully static (no server) — `next.config.ts` has `output: "export"`.

## Commands

- `npm run dev` — Start dev server
- `npm run build` — Build static export to `out/`
- `npm run lint` — Run ESLint
- `npx tsx scripts/fetch-tlds.ts` — Refresh TLD data from IANA
- `npx tsx scripts/validate.ts` — Validate domain hack detection

## Architecture

### Strategy Pattern

All 6 suggestion strategies are pure functions: `(input: string, tldData: TLDData) => Suggestion[]`

- `domainHack.ts` — Splits word so suffix matches a TLD. Exports `detectDomainHack()` reused by other strategies.
- `prefix.ts` — Prepends common words (get, try, my, etc.)
- `suffix.ts` — Appends common words (app, hub, lab, etc.)
- `abbreviation.ts` — Vowel removal, truncation, initials
- `altSpelling.ts` — Letter substitutions (ph↔f, y↔i, c→k, etc.)
- `wordPlay.ts` — Compound words, alliteration, rhyming

Strategies are orchestrated by `src/lib/strategies/index.ts` → `runAllStrategies()` which deduplicates and caps at 500 results.

### Key Files

| File | Purpose |
|------|---------|
| `src/lib/types.ts` | All shared types: `Suggestion`, `TLDData`, `StrategyName`, `FilterState` |
| `src/lib/scoring.ts` | `scoreDomainHack()`, `normalizeInput()`, `deduplicateSuggestions()` |
| `src/lib/tld.ts` | Loads `tlds.json`, builds `byLength` Map and `set` Set, exports `POPULAR_TLDS` |
| `src/hooks/useSuggestions.ts` | Orchestrates: query → strategies → filter → sort |
| `src/app/page.tsx` | Main page wiring all components together |

### Data Files

- `src/data/tlds.json` — 1285 TLDs from IANA (generated by `scripts/fetch-tlds.ts`)
- `src/data/prefixes.json` — 19 common prefixes
- `src/data/suffixes.json` — 20 common suffixes
- `src/data/combining-words.json` — ~200 combining words for word play

## Conventions

- Components using React hooks must have `"use client"` directive
- Tailwind CSS v4: uses `@import "tailwindcss"` in globals.css (not `@tailwind` directives)
- CSS custom properties defined in `:root` and `@media (prefers-color-scheme: dark)` for theming
- Custom Tailwind theme tokens registered via `@theme inline` block in globals.css
- Strategy badge colors: domainHack=purple, prefix=blue, suffix=green, abbreviation=orange, altSpelling=pink, wordPlay=teal
- localStorage key: `split-favorites`
- URL sync: `?q=` query parameter via `useQueryParam` hook

## Important Notes

- `.fy` and `.tic` are NOT real IANA TLDs — spec examples like "noti.fy" won't work. Real domain hacks: `geni.us`, `stre.am`, `foc.us`, `delicio.us`
- The `detectDomainHack()` function is imported by strategies B-E — changing its signature is a breaking change
- `tlds.json` is ~60KB raw — keep an eye on bundle size if adding more data
- All suggestion generation runs synchronously on the main thread via `requestAnimationFrame`
